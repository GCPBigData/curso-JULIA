

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Calling C and Fortran Code &mdash; documentación de Julia Language - 0.3-dev</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  

  
    <link rel="stylesheet" href="https://media.readthedocs.org/css/badge_only.css" type="text/css" />
  
    <link rel="stylesheet" href="https://media.readthedocs.org/css/readthedocs-doc-embed.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/julia.css" type="text/css" />
  
    <link rel="top" title="documentación de Julia Language - 0.3-dev" href="../index.html"/>
        <link rel="up" title="El Manual de Julia" href="index.html"/>
        <link rel="next" title="Julia Packages" href="packages.html"/>
        <link rel="prev" title="Running External Programs" href="running-external-programs.html"/>
 
<!-- RTD Extra Head -->



<!-- 
Read the Docs is acting as the canonical URL for your project. 
If you want to change it, more info is available in our docs:
  http://docs.readthedocs.org/en/latest/canonical.html
-->
<link rel="canonical" href="http://julia-es-la.readthedocs.org/es/latest/manual/calling-c-and-fortran-code.html" />

<script type="text/javascript">
  // This is included here because other places don't have access to the pagename variable.
  var READTHEDOCS_DATA = {
    project: "julia-es-la",
    version: "latest",
    language: "es",
    page: "manual/calling-c-and-fortran-code",
    theme: "julia",
    docroot: "/",
    source_suffix: ".rst",
    api_host: "https://readthedocs.org"
  }
  // Old variables
  var doc_version = "latest";
  var doc_slug = "julia-es-la";
  var page_name = "manual/calling-c-and-fortran-code";
  var html_theme = "julia";
</script>
<!-- RTD Analytics Code -->
<!-- Included in the header because you don't have a footer block. -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-17997319-1']);
  _gaq.push(['_trackPageview']);


  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
<!-- end RTD Analytics Code -->
<!-- end RTD <extrahead> -->


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="http://julialang.org/"><img src="../_static/julia-logo.svg" class="logo"></a>
        <!--
        <a href="../index.html" class="fa fa-home"> Julia Language</a>
        -->
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">El Manual de Julia</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="introduction.html">Introducción</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started.html">Comenzando</a></li>
<li class="toctree-l2"><a class="reference internal" href="integers-and-floating-point-numbers.html">Integers and Floating-Point Numbers</a></li>
<li class="toctree-l2"><a class="reference internal" href="mathematical-operations.html">Mathematical Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="complex-and-rational-numbers.html">Complex and Rational Numbers</a></li>
<li class="toctree-l2"><a class="reference internal" href="strings.html">Strings</a></li>
<li class="toctree-l2"><a class="reference internal" href="functions.html">Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="control-flow.html">Control Flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="variables-and-scoping.html">Variables and Scoping</a></li>
<li class="toctree-l2"><a class="reference internal" href="types.html">Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="methods.html">Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="constructors.html">Constructors</a></li>
<li class="toctree-l2"><a class="reference internal" href="conversion-and-promotion.html">Conversion and Promotion</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html">Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="metaprogramming.html">Metaprogramming</a></li>
<li class="toctree-l2"><a class="reference internal" href="arrays.html">Arreglos</a></li>
<li class="toctree-l2"><a class="reference internal" href="arrays.html#sparse-matrices">Sparse Matrices</a></li>
<li class="toctree-l2"><a class="reference internal" href="parallel-computing.html">Parallel Computing</a></li>
<li class="toctree-l2"><a class="reference internal" href="running-external-programs.html">Running External Programs</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Calling C and Fortran Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="packages.html">Julia Packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="performance-tips.html">Performance Tips</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../stdlib/index.html">Libreria estandar de Julia</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../stdlib/index.html#built-ins">Built-ins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../stdlib/index.html#built-in-modules">Built-in Modules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../packages/packagelist.html">Paquetes Disponibles (en inglés)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id1">ArgParse</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id2">Benchmark</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id3">BinDeps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id4">BioSeq</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id5">BloomFilters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id7">Cairo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id8">Calculus</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id10">Calendar</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id11">Catalan</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id12">Clang</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id13">Clp</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id14">Clustering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id16">Codecs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id17">CoinMP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id19">Color</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id21">Compose</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id23">ContinuedFractions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id25">Cpp</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id26">Cubature</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id27">Curl</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id28">DICOM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id30">DataFrames</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id31">DataStructures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id32">Debug</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id33">DecisionTree</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id34">Devectorize</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id36">DictViews</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id37">DimensionalityReduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id39">Distance</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id41">Distributions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id42">Elliptic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id44">Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id46">FITSIO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id48">FactCheck</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id49">FastaRead</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id51">FileFind</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id53">GLFW</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id54">GLM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id56">GLPK</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id58">GLUT</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id59">GSL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id60">GZip</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id61">Gadfly</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id63">Gaston</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id64">GetC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id66">GoogleCharts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id67">Graphs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id69">Grid</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id71">Gtk</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id72">Gurobi</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id74">HDF5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id76">HDFS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id78">HTTP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id79">Hadamard</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id81">HypothesisTests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id82">ICU</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id84">Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id86">ImmutableArrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id87">IniFile</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id89">Iterators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id91">Ito</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id92">JSON</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id94">JudyDicts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id95">JuliaWebRepl</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id97">Jyacas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id99">KLDivergence</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id101">LM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id103">Languages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id105">LazySequences</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id107">LinProgGLPK</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id109">Loss</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id111">MAT</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id113">MATLAB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id115">MCMC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id116">MLBase</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id118">MarketTechnicals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id119">MathProg</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id120">MathProgBase</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id122">Meshes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id124">MixedModels</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id125">Monads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id126">Mongo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id127">Mongrel2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id129">Mustache</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id131">NHST</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id133">NLopt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id135">Named</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id137">ODBC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id138">ODE</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id140">OpenGL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id142">OpenSSL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id144">Optim</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id146">Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id148">PLX</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id150">PatternDispatch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id152">Polynomial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id154">Profile</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id156">ProjectTemplate</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id158">PyCall</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id160">QuickCheck</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id162">RDatasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id164">RNGTest</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id165">RandomMatrices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id167">Resampling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id169">Rif</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id170">Rmath</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id172">SDE</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id173">SDL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id175">SemidefiniteProgramming</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id177">SimJulia</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id178">Sims</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id179">Stats</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id181">StrPack</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id183">Sundials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id185">SymbolicLP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id187">TOML</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id188">TextAnalysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id190">TextWrap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id192">TimeModels</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id194">TimeSeries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id196">Tk</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id198">TkExtras</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id200">TopicModels</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id201">TradingInstrument</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id203">Trie</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id205">UTF16</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id207">Units</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id209">WAV</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id210">Winston</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id212">ZMQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id214">Zlib</a></li>
<li class="toctree-l2"><a class="reference internal" href="../packages/packagelist.html#id216">kNN</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Julia Language</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">El Manual de Julia</a> &raquo;</li>
      
    <li>Calling C and Fortran Code</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="https://github.com/lbenitesanchez/julia-doc-es-la/blob/master/manual/calling-c-and-fortran-code.rst" class="fa fa-github"> Edit on GitHub</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="calling-c-and-fortran-code">
<span id="man-calling-c-and-fortran-code"></span><h1>Calling C and Fortran Code<a class="headerlink" href="#calling-c-and-fortran-code" title="Enlazar permanentemente con este título">¶</a></h1>
<p>Though most code can be written in Julia, there are many high-quality,
mature libraries for numerical computing already written in C and
Fortran. To allow easy use of this existing code, Julia makes it simple
and efficient to call C and Fortran functions. Julia has a &#8220;no
boilerplate&#8221; philosophy: functions can be called directly from Julia
without any &#8220;glue&#8221; code, code generation, or compilation — even from the
interactive prompt. This is accomplished just by making an appropriate call
with <tt class="docutils literal"><span class="pre">call</span></tt> syntax, which looks like an ordinary function call.</p>
<p>The code to be called must be available as a shared library. Most C and
Fortran libraries ship compiled as shared libraries already, but if you
are compiling the code yourself using GCC (or Clang), you will need to
use the <tt class="docutils literal"><span class="pre">-shared</span></tt> and <tt class="docutils literal"><span class="pre">-fPIC</span></tt> options. The machine instructions
generated by Julia&#8217;s JIT are the same as a native C call would be, so
the resulting overhead is the same as calling a library function from C
code. (Non-library function calls in both C and Julia can be inlined and
thus may have even less overhead than calls to shared library functions.
When both libraries and executables are generated by LLVM, it is
possible to perform whole-program optimizations that can even optimize
across this boundary, but Julia does not yet support that. In the
future, however, it may do so, yielding even greater performance gains.)</p>
<p>Shared libraries and functions are referenced by a tuple of the
form <tt class="docutils literal"><span class="pre">(:function,</span> <span class="pre">&quot;library&quot;)</span></tt> or <tt class="docutils literal"><span class="pre">(&quot;function&quot;,</span> <span class="pre">&quot;library&quot;)</span></tt> where <tt class="docutils literal"><span class="pre">function</span></tt>
is the C-exported function name. <tt class="docutils literal"><span class="pre">library</span></tt> refers to the shared library
name: shared libraries available in the (platform-specific) load path
will be resolved by name, and if necessary a direct path may be specified.</p>
<p>A function name may be used alone in place of the tuple (just
<tt class="docutils literal"><span class="pre">:function</span></tt> or <tt class="docutils literal"><span class="pre">&quot;function&quot;</span></tt>). In this case the name is resolved within
the current process. This form can be used to call C library functions,
functions in the Julia runtime, or functions in an application linked to
Julia.</p>
<p>Finally, you can use <tt class="docutils literal"><span class="pre">ccall</span></tt> to actually generate a call to the
library function. Arguments to <tt class="docutils literal"><span class="pre">ccall</span></tt> are as follows:</p>
<ol class="arabic simple">
<li>(:function, &#8220;library&#8221;) pair (must be a constant, but see below).</li>
<li>Return type, which may be any bits type, including <tt class="docutils literal"><span class="pre">Int32</span></tt>,
<tt class="docutils literal"><span class="pre">Int64</span></tt>, <tt class="docutils literal"><span class="pre">Float64</span></tt>, or <tt class="docutils literal"><span class="pre">Ptr{T}</span></tt> for any type parameter <tt class="docutils literal"><span class="pre">T</span></tt>,
indicating a pointer to values of type <tt class="docutils literal"><span class="pre">T</span></tt>, or just <tt class="docutils literal"><span class="pre">Ptr</span></tt> for
<tt class="docutils literal"><span class="pre">void*</span></tt> &#8220;untyped pointer&#8221; values.</li>
<li>A tuple of input types, like those allowed for the return type.</li>
<li>The following arguments, if any, are the actual argument values
passed to the function.</li>
</ol>
<p>As a complete but simple example, the following calls the <tt class="docutils literal"><span class="pre">clock</span></tt>
function from the standard C library:</p>
<div class="highlight-julia"><div class="highlight"><pre><span class="n">julia</span><span class="o">&gt;</span> <span class="n">t</span> <span class="o">=</span> <span class="k">ccall</span><span class="p">(</span> <span class="p">(:</span><span class="n">clock</span><span class="p">,</span> <span class="s">&quot;libc&quot;</span><span class="p">),</span> <span class="kt">Int32</span><span class="p">,</span> <span class="p">())</span>
<span class="mi">2292761</span>

<span class="n">julia</span><span class="o">&gt;</span> <span class="n">t</span>
<span class="mi">2292761</span>

<span class="n">julia</span><span class="o">&gt;</span> <span class="nb">typeof</span><span class="p">(</span><span class="n">ans</span><span class="p">)</span>
<span class="kt">Int32</span>
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">clock</span></tt> takes no arguments and returns an <tt class="docutils literal"><span class="pre">Int32</span></tt>. One common gotcha
is that a 1-tuple must be written with with a trailing comma. For
example, to call the <tt class="docutils literal"><span class="pre">getenv</span></tt> function to get a pointer to the value
of an environment variable, one makes a call like this:</p>
<div class="highlight-julia"><div class="highlight"><pre><span class="n">julia</span><span class="o">&gt;</span> <span class="n">path</span> <span class="o">=</span> <span class="k">ccall</span><span class="p">(</span> <span class="p">(:</span><span class="n">getenv</span><span class="p">,</span> <span class="s">&quot;libc&quot;</span><span class="p">),</span> <span class="n">Ptr</span><span class="p">{</span><span class="kt">Uint8</span><span class="p">},</span> <span class="p">(</span><span class="n">Ptr</span><span class="p">{</span><span class="kt">Uint8</span><span class="p">},),</span> <span class="s">&quot;SHELL&quot;</span><span class="p">)</span>
<span class="n">Ptr</span><span class="p">{</span><span class="kt">Uint8</span><span class="p">}</span> <span class="p">@</span><span class="mh">0x00007fff5fbffc45</span>

<span class="n">julia</span><span class="o">&gt;</span> <span class="n">bytestring</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<span class="s">&quot;/bin/bash&quot;</span>
</pre></div>
</div>
<p>Note that the argument type tuple must be written as <tt class="docutils literal"><span class="pre">(Ptr{Uint8},)</span></tt>,
rather than <tt class="docutils literal"><span class="pre">(Ptr{Uint8})</span></tt>. This is because <tt class="docutils literal"><span class="pre">(Ptr{Uint8})</span></tt> is just
<tt class="docutils literal"><span class="pre">Ptr{Uint8}</span></tt>, rather than a 1-tuple containing <tt class="docutils literal"><span class="pre">Ptr{Uint8}</span></tt>:</p>
<div class="highlight-julia"><div class="highlight"><pre><span class="n">julia</span><span class="o">&gt;</span> <span class="p">(</span><span class="n">Ptr</span><span class="p">{</span><span class="kt">Uint8</span><span class="p">})</span>
<span class="n">Ptr</span><span class="p">{</span><span class="kt">Uint8</span><span class="p">}</span>

<span class="n">julia</span><span class="o">&gt;</span> <span class="p">(</span><span class="n">Ptr</span><span class="p">{</span><span class="kt">Uint8</span><span class="p">},)</span>
<span class="p">(</span><span class="n">Ptr</span><span class="p">{</span><span class="kt">Uint8</span><span class="p">},)</span>
</pre></div>
</div>
<p>In practice, especially when providing reusable functionality, one
generally wraps <tt class="docutils literal"><span class="pre">ccall</span></tt> uses in Julia functions that set up arguments
and then check for errors in whatever manner the C or Fortran function
indicates them, propagating to the Julia caller as exceptions. This is
especially important since C and Fortran APIs are notoriously
inconsistent about how they indicate error conditions. For example, the
<tt class="docutils literal"><span class="pre">getenv</span></tt> C library function is wrapped in the following Julia function
in
<a class="reference external" href="https://github.com/JuliaLang/julia/blob/master/base/env.jl">env.jl</a>:</p>
<div class="highlight-julia"><div class="highlight"><pre><span class="k">function</span><span class="nf"> getenv</span><span class="p">(</span><span class="n">var</span><span class="p">::</span><span class="n">String</span><span class="p">)</span>
  <span class="n">val</span> <span class="o">=</span> <span class="k">ccall</span><span class="p">(</span> <span class="p">(:</span><span class="n">getenv</span><span class="p">,</span> <span class="s">&quot;libc&quot;</span><span class="p">),</span>
              <span class="n">Ptr</span><span class="p">{</span><span class="kt">Uint8</span><span class="p">},</span> <span class="p">(</span><span class="n">Ptr</span><span class="p">{</span><span class="kt">Uint8</span><span class="p">},),</span> <span class="n">bytestring</span><span class="p">(</span><span class="n">var</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">val</span> <span class="o">==</span> <span class="n">C_NULL</span>
    <span class="nb">error</span><span class="p">(</span><span class="s">&quot;getenv: undefined variable: &quot;</span><span class="p">,</span> <span class="n">var</span><span class="p">)</span>
  <span class="k">end</span>
  <span class="n">bytestring</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<p>The C <tt class="docutils literal"><span class="pre">getenv</span></tt> function indicates an error by returning <tt class="docutils literal"><span class="pre">NULL</span></tt>, but
other standard C functions indicate errors in various different ways,
including by returning -1, 0, 1 and other special values. This wrapper
throws an exception clearly indicating the problem if the caller tries
to get a non-existent environment variable:</p>
<div class="highlight-julia"><div class="highlight"><pre><span class="n">julia</span><span class="o">&gt;</span> <span class="n">getenv</span><span class="p">(</span><span class="s">&quot;SHELL&quot;</span><span class="p">)</span>
<span class="s">&quot;/bin/bash&quot;</span>

<span class="n">julia</span><span class="o">&gt;</span> <span class="n">getenv</span><span class="p">(</span><span class="s">&quot;FOOBAR&quot;</span><span class="p">)</span>
<span class="n">getenv</span><span class="p">:</span> <span class="n">undefined</span> <span class="n">variable</span><span class="p">:</span> <span class="n">FOOBAR</span>
</pre></div>
</div>
<p>Here is a slightly more complex example that discovers the local
machine&#8217;s hostname:</p>
<div class="highlight-julia"><div class="highlight"><pre><span class="k">function</span><span class="nf"> gethostname</span><span class="p">()</span>
  <span class="n">hostname</span> <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="kt">Uint8</span><span class="p">,</span> <span class="mi">128</span><span class="p">)</span>
  <span class="k">ccall</span><span class="p">(</span> <span class="p">(:</span><span class="n">gethostname</span><span class="p">,</span> <span class="s">&quot;libc&quot;</span><span class="p">),</span> <span class="kt">Int32</span><span class="p">,</span>
        <span class="p">(</span><span class="n">Ptr</span><span class="p">{</span><span class="kt">Uint8</span><span class="p">},</span> <span class="kt">Uint</span><span class="p">),</span>
        <span class="n">hostname</span><span class="p">,</span> <span class="n">length</span><span class="p">(</span><span class="n">hostname</span><span class="p">))</span>
  <span class="k">return</span> <span class="n">bytestring</span><span class="p">(</span><span class="nb">convert</span><span class="p">(</span><span class="n">Ptr</span><span class="p">{</span><span class="kt">Uint8</span><span class="p">},</span> <span class="n">hostname</span><span class="p">))</span>
<span class="k">end</span>
</pre></div>
</div>
<p>This example first allocates an array of bytes, then calls the C library
function <tt class="docutils literal"><span class="pre">gethostname</span></tt> to fill the array in with the hostname, takes a
pointer to the hostname buffer, and converts the pointer to a Julia
string, assuming that it is a NUL-terminated C string. It is common for
C libraries to use this pattern of requiring the caller to allocate
memory to be passed to the callee and filled in. Allocation of memory
from Julia like this is generally accomplished by creating an
uninitialized array and passing a pointer to its data to the C function.</p>
<p>When calling a Fortran function, all inputs must be passed by reference.</p>
<p>A prefix <tt class="docutils literal"><span class="pre">&amp;</span></tt> is used to indicate that a pointer to a scalar argument
should be passed instead of the scalar value itself. The following
example computes a dot product using a BLAS function.</p>
<div class="highlight-julia"><div class="highlight"><pre><span class="k">function</span><span class="nf"> compute_dot</span><span class="p">(</span><span class="n">DX</span><span class="p">::</span><span class="n">Vector</span><span class="p">,</span> <span class="n">DY</span><span class="p">::</span><span class="n">Vector</span><span class="p">)</span>
  <span class="nb">assert</span><span class="p">(</span><span class="n">length</span><span class="p">(</span><span class="n">DX</span><span class="p">)</span> <span class="o">==</span> <span class="n">length</span><span class="p">(</span><span class="n">DY</span><span class="p">))</span>
  <span class="n">n</span> <span class="o">=</span> <span class="n">length</span><span class="p">(</span><span class="n">DX</span><span class="p">)</span>
  <span class="n">incx</span> <span class="o">=</span> <span class="n">incy</span> <span class="o">=</span> <span class="mi">1</span>
  <span class="n">product</span> <span class="o">=</span> <span class="k">ccall</span><span class="p">(</span> <span class="p">(:</span><span class="n">ddot_</span><span class="p">,</span> <span class="s">&quot;libLAPACK&quot;</span><span class="p">),</span>
                  <span class="kt">Float64</span><span class="p">,</span>
                  <span class="p">(</span><span class="n">Ptr</span><span class="p">{</span><span class="kt">Int32</span><span class="p">},</span> <span class="n">Ptr</span><span class="p">{</span><span class="kt">Float64</span><span class="p">},</span> <span class="n">Ptr</span><span class="p">{</span><span class="kt">Int32</span><span class="p">},</span> <span class="n">Ptr</span><span class="p">{</span><span class="kt">Float64</span><span class="p">},</span> <span class="n">Ptr</span><span class="p">{</span><span class="kt">Int32</span><span class="p">}),</span>
                  <span class="o">&amp;</span><span class="n">n</span><span class="p">,</span> <span class="n">DX</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">incx</span><span class="p">,</span> <span class="n">DY</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">incy</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">product</span>
<span class="k">end</span>
</pre></div>
</div>
<p>The meaning of prefix <tt class="docutils literal"><span class="pre">&amp;</span></tt> is not quite the same as in C. In
particular, any changes to the referenced variables may not be visible
in Julia (the goal is to make any changes visible in the spirit of C, but
this is not currently implemented for immutable types). However, it will
never cause any harm for called functions to attempt such modifications
(that is, writing through the passed pointers). Since this <tt class="docutils literal"><span class="pre">&amp;</span></tt> is not
a real address operator, it may be used with any syntax, such as
<tt class="docutils literal"><span class="pre">&amp;0</span></tt> or <tt class="docutils literal"><span class="pre">&amp;f(x)</span></tt>.</p>
<p>Note that no C header files are used anywhere in the process. Currently,
it is not possible to pass structs and other non-primitive types from
Julia to C libraries. However, C functions that generate and use opaque
structs types by passing around pointers to them can return such values
to Julia as <tt class="docutils literal"><span class="pre">Ptr{Void}</span></tt>, which can then be passed to other C functions
as <tt class="docutils literal"><span class="pre">Ptr{Void}</span></tt>. Memory allocation and deallocation of such objects
must be handled by calls to the appropriate cleanup routines in the
libraries being used, just like in any C program.</p>
<div class="section" id="mapping-c-types-to-julia">
<h2>Mapping C Types to Julia<a class="headerlink" href="#mapping-c-types-to-julia" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Julia automatically inserts calls to the <tt class="docutils literal"><span class="pre">convert</span></tt> function to convert
each argument to the specified type. For example, the following call:</p>
<div class="highlight-julia"><div class="highlight"><pre><span class="k">ccall</span><span class="p">(</span> <span class="p">(:</span><span class="n">foo</span><span class="p">,</span> <span class="s">&quot;libfoo&quot;</span><span class="p">),</span> <span class="n">Void</span><span class="p">,</span> <span class="p">(</span><span class="kt">Int32</span><span class="p">,</span> <span class="kt">Float64</span><span class="p">),</span>
      <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
<p>will behave as if the following were written:</p>
<div class="highlight-julia"><div class="highlight"><pre><span class="k">ccall</span><span class="p">(</span> <span class="p">(:</span><span class="n">foo</span><span class="p">,</span> <span class="s">&quot;libfoo&quot;</span><span class="p">),</span> <span class="n">Void</span><span class="p">,</span> <span class="p">(</span><span class="kt">Int32</span><span class="p">,</span> <span class="kt">Float64</span><span class="p">),</span>
      <span class="nb">convert</span><span class="p">(</span><span class="kt">Int32</span><span class="p">,</span> <span class="n">x</span><span class="p">),</span> <span class="nb">convert</span><span class="p">(</span><span class="kt">Float64</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
</pre></div>
</div>
<p>When a scalar value is passed with <tt class="docutils literal"><span class="pre">&amp;</span></tt> as an argument of type
<tt class="docutils literal"><span class="pre">Ptr{T}</span></tt>, the value will first be converted to type <tt class="docutils literal"><span class="pre">T</span></tt>.</p>
<div class="section" id="array-conversions">
<h3>Array conversions<a class="headerlink" href="#array-conversions" title="Enlazar permanentemente con este título">¶</a></h3>
<p>When an <tt class="docutils literal"><span class="pre">Array</span></tt> is passed to C as a <tt class="docutils literal"><span class="pre">Ptr</span></tt> argument, it is
&#8220;converted&#8221; simply by taking the address of the first element. This is
done in order to avoid copying arrays unnecessarily, and to tolerate the
slight mismatches in pointer types that are often encountered in C APIs
(for example, passing a <tt class="docutils literal"><span class="pre">Float64</span></tt> array to a function that operates on
uninterpreted bytes).</p>
<p>Therefore, if an <tt class="docutils literal"><span class="pre">Array</span></tt> contains data in the wrong format, it will
have to be explicitly converted using a call such as <tt class="docutils literal"><span class="pre">int32(a)</span></tt>.</p>
</div>
<div class="section" id="type-correspondences">
<h3>Type correspondences<a class="headerlink" href="#type-correspondences" title="Enlazar permanentemente con este título">¶</a></h3>
<p>On all systems we currently support, basic C/C++ value types may be
translated to Julia types as follows. Every C type also has a corresponding
Julia type with the same name, prefixed by C. This can help for writing portable code (and remembering that an int in C is not the same as an Int in Julia).</p>
<p><strong>System-independent:</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="32%" />
<col width="25%" />
<col width="43%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">bool</span></tt> (8 bits)</td>
<td><tt class="docutils literal"><span class="pre">Cbool</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Bool</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">signed</span> <span class="pre">char</span></tt></td>
<td>&nbsp;</td>
<td><tt class="docutils literal"><span class="pre">Int8</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">unsigned</span> <span class="pre">char</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Cuchar</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Uint8</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">short</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Cshort</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Int16</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">unsigned</span> <span class="pre">short</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Cushort</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Uint16</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">int</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Cint</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Int32</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">unsigned</span> <span class="pre">int</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Cuint</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Uint32</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">long</span> <span class="pre">long</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Clonglong</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Int64</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">unsigned</span> <span class="pre">long</span> <span class="pre">long</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Culonglong</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Uint64</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">float</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Cfloat</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Float32</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">double</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Cdouble</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Float64</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">ptrdiff_t</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Cptrdiff_t</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Int</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">size_t</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Csize_t</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Uint</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">complex</span> <span class="pre">float</span></tt></td>
<td colspan="2"><tt class="docutils literal"><span class="pre">Ccomplex_float</span></tt> (future addition)</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">complex</span> <span class="pre">double</span></tt></td>
<td colspan="2"><tt class="docutils literal"><span class="pre">Ccomplex_double</span></tt> (future addition)</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">void</span></tt></td>
<td>&nbsp;</td>
<td><tt class="docutils literal"><span class="pre">Void</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">void*</span></tt></td>
<td>&nbsp;</td>
<td><tt class="docutils literal"><span class="pre">Ptr{Void}</span></tt></td>
</tr>
<tr class="row-even"><td colspan="2"><tt class="docutils literal"><span class="pre">char*</span></tt> (or <tt class="docutils literal"><span class="pre">char[]</span></tt>, e.g. a string)</td>
<td><tt class="docutils literal"><span class="pre">Ptr{Uint8}</span></tt></td>
</tr>
<tr class="row-odd"><td colspan="2"><tt class="docutils literal"><span class="pre">char**</span></tt> (or <tt class="docutils literal"><span class="pre">*char[]</span></tt>)</td>
<td><tt class="docutils literal"><span class="pre">Ptr{Ptr{Uint8}}</span></tt></td>
</tr>
<tr class="row-even"><td colspan="2"><tt class="docutils literal"><span class="pre">struct</span> <span class="pre">T*</span></tt> (where T represents an
appropriately defined bits type)</td>
<td><tt class="docutils literal"><span class="pre">Ptr{T}</span></tt> (call using
&amp;variable_name in the
parameter list)</td>
</tr>
<tr class="row-odd"><td colspan="2"><tt class="docutils literal"><span class="pre">struct</span> <span class="pre">T</span></tt> (where T represents  an
appropriately defined bits type)</td>
<td><tt class="docutils literal"><span class="pre">T</span></tt> (call using
&amp;variable_name in the
parameter list)</td>
</tr>
<tr class="row-even"><td colspan="2"><tt class="docutils literal"><span class="pre">jl_value_t*</span></tt> (any Julia Type)</td>
<td><tt class="docutils literal"><span class="pre">Ptr{Any}</span></tt></td>
</tr>
</tbody>
</table>
<p><em>Note:</em> the <tt class="docutils literal"><span class="pre">bool</span></tt> type is only defined by C++, where it is 8 bits
wide. In C, however, <tt class="docutils literal"><span class="pre">int</span></tt> is often used for boolean values. Since
<tt class="docutils literal"><span class="pre">int</span></tt> is 32-bits wide (on all supported systems), there is some
potential for confusion here.</p>
<p>A C function declared to return <tt class="docutils literal"><span class="pre">void</span></tt> will give <tt class="docutils literal"><span class="pre">nothing</span></tt> in Julia.</p>
<p><strong>System-dependent:</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="19%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">char</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Cchar</span></tt></td>
<td><p class="first"><tt class="docutils literal"><span class="pre">Int8</span></tt> (x86, x86_64)</p>
<p class="last"><tt class="docutils literal"><span class="pre">Uint8</span></tt> (powerpc, arm)</p>
</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">long</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Clong</span></tt></td>
<td><p class="first"><tt class="docutils literal"><span class="pre">Int</span></tt> (UNIX)</p>
<p class="last"><tt class="docutils literal"><span class="pre">Int32</span></tt> (Windows)</p>
</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">unsigned</span> <span class="pre">long</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Culong</span></tt></td>
<td><p class="first"><tt class="docutils literal"><span class="pre">Uint</span></tt> (UNIX)</p>
<p class="last"><tt class="docutils literal"><span class="pre">Int32</span></tt> (Windows)</p>
</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">wchar_t</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Char</span></tt></td>
<td>Although <tt class="docutils literal"><span class="pre">wchar_t</span></tt> is technically
system-dependent, on all the
systems we currently support (UNIX),
it is 32-bit.</td>
</tr>
</tbody>
</table>
<p>For string arguments (<tt class="docutils literal"><span class="pre">char*</span></tt>) the Julia type should be <tt class="docutils literal"><span class="pre">Ptr{Uint8}</span></tt>,
not <tt class="docutils literal"><span class="pre">ASCIIString</span></tt>. C functions that take an argument of the type <tt class="docutils literal"><span class="pre">char**</span></tt>
can be called by using a <tt class="docutils literal"><span class="pre">Ptr{Ptr{Uint8}}</span></tt> type within Julia. For example,
C functions of the form:</p>
<div class="highlight-julia"><div class="highlight"><pre><span class="n">int</span> <span class="n">main</span><span class="p">(</span><span class="n">int</span> <span class="n">argc</span><span class="p">,</span> <span class="n">char</span> <span class="o">**</span><span class="n">argv</span><span class="p">);</span>
</pre></div>
</div>
<p>can be called via the following Julia code:</p>
<div class="highlight-julia"><div class="highlight"><pre><span class="n">argv</span> <span class="o">=</span> <span class="p">[</span> <span class="s">&quot;a.out&quot;</span><span class="p">,</span> <span class="s">&quot;arg1&quot;</span><span class="p">,</span> <span class="s">&quot;arg2&quot;</span> <span class="p">]</span>
<span class="k">ccall</span><span class="p">(:</span><span class="n">main</span><span class="p">,</span> <span class="kt">Int32</span><span class="p">,</span> <span class="p">(</span><span class="kt">Int32</span><span class="p">,</span> <span class="n">Ptr</span><span class="p">{</span><span class="n">Ptr</span><span class="p">{</span><span class="kt">Uint8</span><span class="p">}}),</span> <span class="n">length</span><span class="p">(</span><span class="n">argv</span><span class="p">),</span> <span class="n">argv</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="accessing-data-through-a-pointer">
<h2>Accessing Data through a Pointer<a class="headerlink" href="#accessing-data-through-a-pointer" title="Enlazar permanentemente con este título">¶</a></h2>
<p>The following methods are described as &#8220;unsafe&#8221; because they can cause Julia
to terminate abruptly or corrupt arbitrary process memory due to a bad pointer
or type declaration.</p>
<p>Given a <tt class="docutils literal"><span class="pre">Ptr{T}</span></tt>, the contents of type <tt class="docutils literal"><span class="pre">T</span></tt> can generally be copied from
the referenced memory into a Julia type using <tt class="docutils literal"><span class="pre">unsafe_ref(ptr,</span> <span class="pre">[index])</span></tt>. The
index argument is optional (default is 1), and performs 1-based indexing. This
function is intentionally similar to the behavior of <tt class="docutils literal"><span class="pre">getindex()</span></tt> and <tt class="docutils literal"><span class="pre">setindex!()</span></tt>
(e.g. <tt class="docutils literal"><span class="pre">[]</span></tt> access syntax).</p>
<p>If T is a bitstype, the return value will be that number.</p>
<p>If T is a type or immutable, the return value will be a new object initialized
to contain a copy of the contents of the referenced memory. The referenced
memory can safely be freed or released.</p>
<p>If T is Any, then the referenced memory is assumed to contain some
<tt class="docutils literal"><span class="pre">jl_value_t*</span></tt> and is not copied. You must be careful in this case to ensure
that the object was always visible to the garbage collector (pointers do not
count, but the new object does) to ensure the memory is not prematurely freed.
Note that if the object was not originally allocated by Julia, the new object
will never be finalized by Julia&#8217;s garbage collector.  If the <tt class="docutils literal"><span class="pre">Ptr</span></tt> itself
is actually a <tt class="docutils literal"><span class="pre">jl_value_t*</span></tt>, it can be converted back to a Julia object
reference by <tt class="docutils literal"><span class="pre">unsafe_pointer_to_objref(ptr)</span></tt>.  [Julia values <tt class="docutils literal"><span class="pre">v</span></tt>
can be converted to <tt class="docutils literal"><span class="pre">jl_value_t*</span></tt> pointers (<tt class="docutils literal"><span class="pre">Ptr{Void}</span></tt>) by calling
<tt class="docutils literal"><span class="pre">pointer_from_objref(v)</span></tt>.]</p>
<p>The reverse operation (writing data to a Ptr{T}), can be performed using
<tt class="docutils literal"><span class="pre">unsafe_assign(ptr,</span> <span class="pre">value,</span> <span class="pre">[index])</span></tt>.  Currently, this is only supported
for bitstypes or other pointer-free (<tt class="docutils literal"><span class="pre">isbits</span></tt>) immutable types.</p>
<p>Any operation that throws an error is probably currently unimplemented
and should be posted as a bug so that it can be resolved.</p>
<p>If the pointer of interest is an array of bits (bitstype or immutable), the
function <tt class="docutils literal"><span class="pre">pointer_to_array(ptr,dims,[own])</span></tt> may be more more useful. The final
parameter should be true if Julia should &#8220;take ownership&#8221; of the underlying
buffer and call <tt class="docutils literal"><span class="pre">free(ptr)</span></tt> when the returned <tt class="docutils literal"><span class="pre">Array</span></tt> object is finalized.
If the <tt class="docutils literal"><span class="pre">own</span></tt> parameter is omitted or false, the caller must ensure the
buffer remains in existence until all access is complete.</p>
</div>
<div class="section" id="garbage-collection-safety">
<h2>Garbage Collection Safety<a class="headerlink" href="#garbage-collection-safety" title="Enlazar permanentemente con este título">¶</a></h2>
<p>When passing data to a ccall, it is best to avoid using the <tt class="docutils literal"><span class="pre">pointer()</span></tt>
function. Instead define a convert method and pass the variables directly to
the ccall. ccall automatically arranges that all of its arguments will be
preserved from garbage collection until the call returns. If a C API will
store a reference to memory allocated by Julia, after the ccall returns, you
must arrange that the object remains visible to the garbage collector. The
suggested way to handle this is to make a global variable of type
<tt class="docutils literal"><span class="pre">Array{Any,1}</span></tt> to hold these values, until C interface notifies you that
it is finished with them.</p>
<p>Whenever you have created a pointer to Julia data, you must ensure the original data
exists until you are done with using the pointer. Many methods in Julia such as
<tt class="docutils literal"><span class="pre">unsafe_ref()</span></tt> and <tt class="docutils literal"><span class="pre">bytestring()</span></tt> make copies of data instead of taking ownership
of the buffer, so that it is safe to free (or alter) the original data without
affecting Julia. A notable exception is <tt class="docutils literal"><span class="pre">pointer_to_array()</span></tt> which, for performance
reasons, shares (or can be told to take ownership of) the underlying buffer.</p>
</div>
<div class="section" id="non-constant-function-specifications">
<h2>Non-constant Function Specifications<a class="headerlink" href="#non-constant-function-specifications" title="Enlazar permanentemente con este título">¶</a></h2>
<p>A <tt class="docutils literal"><span class="pre">(name,</span> <span class="pre">library)</span></tt> function specification must be a constant expression.
However, it is possible to use computed values as function names by staging
through <tt class="docutils literal"><span class="pre">eval</span></tt> as follows:</p>
<blockquote>
<div>&#64;eval ccall(($(string(&#8220;a&#8221;,&#8221;b&#8221;)),&#8221;lib&#8221;), ...</div></blockquote>
<p>This expression constructs a name using <tt class="docutils literal"><span class="pre">string</span></tt>, then substitutes this
name into a new <tt class="docutils literal"><span class="pre">ccall</span></tt> expression, which is then evaluated. Keep in mind that
<tt class="docutils literal"><span class="pre">eval</span></tt> only operates at the top level, so within this expression local
variables will not be available (unless their values are substituted with
<tt class="docutils literal"><span class="pre">$</span></tt>). For this reason, <tt class="docutils literal"><span class="pre">eval</span></tt> is typically only used to form top-level
definitions, for example when wrapping libraries that contain many
similar functions.</p>
</div>
<div class="section" id="indirect-calls">
<h2>Indirect calls<a class="headerlink" href="#indirect-calls" title="Enlazar permanentemente con este título">¶</a></h2>
<p>The first argument to <tt class="docutils literal"><span class="pre">ccall</span></tt> can also be an expression evaluated at
run time. In this case, the expression must evaluate to a <tt class="docutils literal"><span class="pre">Ptr</span></tt>,
which will be used as the address of the native function to call. This
behavior occurs when the first <tt class="docutils literal"><span class="pre">ccall</span></tt> argument contains references
to non-constants, such as local variables or function arguments.</p>
</div>
<div class="section" id="c">
<h2>C++<a class="headerlink" href="#c" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Limited support for C++ is provided by the <cite>Cpp</cite> package.</p>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="packages.html" class="btn btn-neutral float-right" title="Julia Packages">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="running-external-programs.html" class="btn btn-neutral" title="Running External Programs"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2012-2013, Jeff Bezanson, Stefan Karpinski, Viral Shah, Alan Edelman, et al..
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.3-dev',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="https://media.readthedocs.org/javascript/jquery/jquery-2.0.3.min.js"></script>
      <script type="text/javascript" src="https://media.readthedocs.org/javascript/jquery/jquery-migrate-1.2.1.min.js"></script>
      <script type="text/javascript" src="https://media.readthedocs.org/javascript/underscore.js"></script>
      <script type="text/javascript" src="https://media.readthedocs.org/javascript/doctools.js"></script>
      <script type="text/javascript" src="../_static/translations.js"></script>
      <script type="text/javascript" src="https://media.readthedocs.org/javascript/readthedocs-doc-embed.js"></script>
      <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>